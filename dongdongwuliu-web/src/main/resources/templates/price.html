<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <title>东东物流，优质！优质！</title>
    <link rel="icon" href="/assets/img/favicon.ico">
    <script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/webbase.css" />
    <link rel="stylesheet" type="text/css" href="css/pages-JD-index.css" />
    <link rel="stylesheet" type="text/css" href="css/widget-jquery.autocomplete.css" />
    <link rel="stylesheet" type="text/css" href="css/widget-cartPanelView.css" />
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_2364180_unbwh61gd7g.css" />
</head>

<body>
<!-- 头部栏位 -->
<!--页面顶部-->
<div id="nav-bottom">
    <!--顶部-->
    <div class="nav-top">
        <div class="top">
            <div class="py-container">
                <div class="shortcut">
                    <ul class="fl">
                        <li class="f-item">东东物流欢迎您！</li>
                        <li class="f-item">请<a href="/tologin" target="_blank">登录</a>　<span><a href="register.html" target="_blank">免费注册</a></span></li>
                    </ul>
                    <ul >
                        <li class="f-item">城市：北京</li>
                        <li class="f-item">天气：晴天</li>
                        <li class="f-item">温度：-3</li>
                        <li class="f-item">风向：西北风，等级：3级大风</li>
                        <li class="f-item">湿度：20</li>
                    </ul>
                    <ul class="fr">
                        <li class="f-item"><a href="/toCreateOrder" >寄件</a></li>
                        <li class="f-item space"></li>
                        <li class="f-item"><a href="/toSearch" target="_blank">追踪与管理</a></li>
                        <li class="f-item space"></li>
                        <li class="f-item"><a href="/toUser">个人中心</a></li>
                        <li class="f-item space"></li>
                        <li class="f-item"><a href="/toMyOrder">我的订单</a></li>
                        <li class="f-item space"></li>
                        <li class="f-item"><a href="/toHomeSettingAddress">联系人管理</a></li>
                        <li class="f-item space"></li>
                        <li class="f-item"><a href="/toOverview" >关于东东物流</a></li>
                        <li class="f-item space"></li>
                        <li class="f-item" id="service">
                            <span>客户服务</span>
                            <ul class="service">
                                <li><a href="cooperation.html" target="_blank">合作招商</a></li>
                                <li><a href="shoplogin.html" target="_blank">商家后台</a></li>
                                <li><a href="cooperation.html" target="_blank">合作招商</a></li>
                                <li><a href="#">商家后台</a></li>
                            </ul>
                        </li>
                        <li class="f-item space"></li>
                        <li class="f-item">网站导航</li>
                    </ul>
                </div>
            </div>
        </div>

        <!--头部-->
        <div class="header">
            <div class="py-container">
                <div class="yui3-g Logo">
                    <div class="yui3-u Left logoArea" style="display: flex;align-items: center;justify-content: center">
                        <h2 >东东物流</h2>
                    </div>
                    <div class="yui3-u Center searchArea">
                        <div class="search">
                            <form action="" class="sui-form form-inline">
                                <!--searchAutoComplete-->
                                <div class="input-append">
                                    <input  id="autocomplete" type="text" class="input-error input-xxlarge" placeholder="货物追踪，请输入订单号或者手机号"/>
                                    <button class="sui-btn btn-xlarge btn-danger" type="button" onclick="search()">搜索</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="yui3-g NavList" >
                    <div class="yui3-u Left all-sort" style="background: white!important;">
                    </div>
                    <div class="yui3-u Center navArea">
                        <ul class="nav">
                            <li class="f-item"><a href="/" >首页</a></li>
                            <li class="f-item"><a href="/toCreateOrder" >在线下单</a></li>
                            <li class="f-item"><a href="/toPrice" >价格时效查询</a></li>
                            <li class="f-item"><a href="/toSite" >网点查询</a></li>
                            <li class="f-item"><a href="/toSeckillIndex" target="_blank">秒杀优惠券</a></li>
                        </ul>
                    </div>
                    <div class="yui3-u Right"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--列表-->
<div style="background: #EAEAEA;padding: 20px 0">
    <h1 style="text-align: center">价格查询</h1>
    <div style="width: 1200px;margin: 0 auto;">
        <form id="addForm">
            <input type="hidden" id="senderAreaName">
            <input type="hidden" id="receiverAreaName">
            <div style="display: flex;">
                <div style="margin-right: 20px">
                    寄件地址:
                    <div class="form-group area">
                        省:
                        <select onchange="city(this.value)" class="form-control" name="provinceId" id="provinceId">
                            <option>请选择</option>
                        </select><br>
                        市:
                        <select onchange="town(this.value)" class="form-control" name="cityId" id="cityId">
                            <option>请选择</option>
                        </select><br>
                        县/区:
                        <select class="form-control" name="townId" id="townId">
                            <option>请选择</option>
                        </select>
                    </div><br>
                </div>

                <div>
                    收件地址:
                    <div class="form-group area">
                        省:
                        <select onchange="city2(this.value)" class="form-control" name="provinceId2" id="provinceId2">
                            <option>请选择</option>
                        </select><br>
                        市:
                        <select onchange="town2(this.value)" class="form-control" name="cityId2" id="cityId2">
                            <option>请选择</option>
                        </select><br>
                        县/区:
                        <select class="form-control" name="townId2" id="townId2">
                            <option>请选择</option>
                        </select>
                    </div><br>
                </div>
            </div>

            重量(kg):<input type="text" name="cargoWeight" placeholder="货物重量应大于0" id="cargoWeight"><br>
            体积(m3):<input type="text" name="cargoVolume" id="cargoVolume"><br>
            <br><br>
        </form>

        <input type="button" onclick="getPrice()" value="预估价格"> <h3 id="price"></h3>
    </div>
</div>

<script>
    getInfo()
    // 获取所有省
    function getInfo(){
        $.get("/provincesController/getInfo", null, function (res) {
            if(res.code == 200){
                var data = res.data
                var content = "<option>请选择</option>"
                for (let i = 0; i < data.length; i++) {
                    content += "<option value='"+data[i].provinceid+"'>"+data[i].province+"</option>"
                }
                // 寄件地址
                $("#provinceId").html(content)
                // 收货地址
                $("#provinceId2").html(content)
            }
        })
    }
    // 根据省ID查询所有市
    function city(obj){
        $.get("/provincesController/getCity", {provinceId: obj}, function (res) {
            if(res.code == 200){
                var data = res.data
                var content = "<option>请选择</option>"
                for (let i = 0; i < data.length; i++) {
                    content += "<option value='"+data[i].cityid+"'>"+data[i].city+"</option>"
                }
                $("#cityId").html(content)
                $("#townId").html("<option>请选择</option>")
            }
        })
    }
    // 根据省ID查询所有市
    function city2(obj){
        $.get("/provincesController/getCity", {provinceId: obj}, function (res) {
            if(res.code == 200){
                var data = res.data
                var content = "<option>请选择</option>"
                for (let i = 0; i < data.length; i++) {
                    content += "<option value='"+data[i].cityid+"'>"+data[i].city+"</option>"
                }
                $("#cityId2").html(content)
                $("#townId2").html("<option>请选择</option>")
            }
        })
    }
    // 根据市ID查询所有县/区
    function town(obj){
        $.get("/provincesController/getTown", {cityid: obj}, function (res) {
            if(res.code == 200){
                var data = res.data
                var content = "<option>请选择</option>"
                for (let i = 0; i < data.length; i++) {
                    content += "<option value='"+data[i].areaid+"'>"+data[i].area+"</option>"
                }
                $("#townId").html(content)
            }
        })
    }
    // 根据市ID查询所有县/区
    function town2(obj){
        $.get("/provincesController/getTown", {cityid: obj}, function (res) {
            if(res.code == 200){
                var data = res.data
                var content = "<option>请选择</option>"
                for (let i = 0; i < data.length; i++) {
                    content += "<option value='"+data[i].areaid+"'>"+data[i].area+"</option>"
                }
                $("#townId2").html(content)
            }
        })
    }

    // 计算价格
    function getPrice(){
        var provinceId = $("#provinceId").val()     // 省
        var provinceId2 = $("#provinceId2").val()   // 省
        var cargoWeight = $("#cargoWeight").val()   // 重量
        var cargoVolume = $("#cargoVolume").val()   // 体积

        // 根据收发货省id获取线路id
        $.ajax({
            url:"/orderController/selectStartpidByInfo/" + provinceId + "/" + provinceId2,
            type:"get",
            dataType:"json",
            success:function(data){
                var pathId = data.id;
                var ji = "";
                var shou = "";
                if (data.startPid == provinceId){
                    ji += data.startPid;
                }
                if (data.endPid == provinceId2){
                    shou += data.endPid;
                }
                console.log("寄" + ji + "收" + shou);

                // 根据线路id查询线路价格
                $.ajax({
                    url:"/orderController/getCarriagePriceByPathId/" + pathId,
                    type:"get",
                    dataType:"json",
                    success:function(data){
                        // 首重
                        var firstKg = data.firstKg;
                        // 首重价格
                        var firstKgPrice = data.firstKgPrice;
                        // 次重
                        var otherKg = data.otherKg;
                        // 次重价格
                        var otherKgPrice = data.otherKgPrice;
                        // 首立方
                        var firstStere = data.firstStere;
                        // 首立方价格
                        var firstSterePrice = data.firstSterePrice;
                        // 次立方
                        var otherStere = data.otherStere;
                        // 次立方价格
                        var otherSterePrice = data.otherSterePrice;

                        // 计算重量价格,
                        // 用户填写的重量 - 首重 = 剩余重量
                        // 剩余重量 * 次重价格 = 续重价格
                        // 将首重价格 + 续重价格 = 总价格
                        var wk = (cargoWeight - firstKg) * otherKgPrice + firstKgPrice

                        // 计算体积价格
                        // 用户填写的体积 - 首立方 = 剩余立方
                        // 剩余立方 * 次立方价格 = 续立方价格
                        // 将首立方价格 + 续立方价格 = 总价格
                        var vs = (cargoVolume - firstStere) * otherSterePrice + firstSterePrice

                        // 取体积价格与重量价格两者之间的较大值
                        if(eval(wk) > eval(vs)){    // 重量价格大
                           $("#price").html("预估金额为:" + wk + "元")
                        }else{  // 体积价格大
                            $("#price").html("预估金额为:" + vs + "元")
                        }
                    }
                })
            }
        })
    }

</script>

<!--商标-->
<div class="brand">
    <div class="py-container">
        <ul class="Brand-list blockgary">
            <li class="Brand-item">
                <img src="img/brand_21.png" />
            </li>
            <li class="Brand-item"><img src="img/brand_03.png" /></li>
            <li class="Brand-item"><img src="img/brand_05.png" /></li>
            <li class="Brand-item"><img src="img/brand_07.png" /></li>
            <li class="Brand-item"><img src="img/brand_09.png" /></li>
            <li class="Brand-item"><img src="img/brand_11.png" /></li>
            <li class="Brand-item"><img src="img/brand_13.png" /></li>
            <li class="Brand-item"><img src="img/brand_15.png" /></li>
            <li class="Brand-item"><img src="img/brand_17.png" /></li>
            <li class="Brand-item"><img src="img/brand_19.png" /></li>
        </ul>
    </div>
</div>
<!-- 底部栏位 -->
<!--页面底部-->
<div class="clearfix footer">
    <div class="py-container">
        <div class="footlink">
            <div class="Mod-service">
                <ul class="Mod-Service-list">
                    <li class="grid-service-item intro  intro1">
                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li class="grid-service-item  intro intro2">
                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li class="grid-service-item intro  intro3">
                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li class="grid-service-item  intro intro4">
                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li class="grid-service-item intro intro5">
                        <i class="serivce-item fl"></i>
                        <div class="service-text">
                            <h4>正品保障</h4>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="clearfix Mod-list">
                <div class="yui3-g">
                    <div class="yui3-u-1-6">
                        <h4>购物指南</h4>
                        <ul class="unstyled">
                            <li>购物流程</li>
                            <li>会员介绍</li>
                            <li>生活旅行/团购</li>
                            <li>常见问题</li>
                            <li>购物指南</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>配送方式</h4>
                        <ul class="unstyled">
                            <li>上门自提</li>
                            <li>211限时达</li>
                            <li>配送服务查询</li>
                            <li>配送费收取标准</li>
                            <li>海外配送</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>支付方式</h4>
                        <ul class="unstyled">
                            <li>货到付款</li>
                            <li>在线支付</li>
                            <li>分期付款</li>
                            <li>邮局汇款</li>
                            <li>公司转账</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>售后服务</h4>
                        <ul class="unstyled">
                            <li>售后政策</li>
                            <li>价格保护</li>
                            <li>退款说明</li>
                            <li>返修/退换货</li>
                            <li>取消订单</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>特色服务</h4>
                        <ul class="unstyled">
                            <li>夺宝岛</li>
                            <li>DIY装机</li>
                            <li>延保服务</li>
                            <li>东东商城E卡</li>
                            <li>东东商城通信</li>
                        </ul>
                    </div>
                    <div class="yui3-u-1-6">
                        <h4>帮助中心</h4>
                        <img src="img/wx_cz.jpg">
                    </div>
                </div>
            </div>
            <div class="Mod-copyright">
                <ul class="helpLink">
                    <li>关于我们<span class="space"></span></li>
                    <li>联系我们<span class="space"></span></li>
                    <li>关于我们<span class="space"></span></li>
                    <li>商家入驻<span class="space"></span></li>
                    <li>营销中心<span class="space"></span></li>
                    <li>友情链接<span class="space"></span></li>
                    <li>关于我们<span class="space"></span></li>
                    <li>营销中心<span class="space"></span></li>
                    <li>友情链接<span class="space"></span></li>
                    <li>关于我们</li>
                </ul>
                <p>地址：北京市昌平区沙阳路18号 邮编：100000 电话：400-0123-302</p>
                <p>京ICP备08006666号京公网安备11010888888</p>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/model/cartModel.js"></script>
<script type="text/javascript" src="js/czFunction.js"></script>
<script type="text/javascript" src="js/plugins/jquery.easing/jquery.easing.min.js"></script>
<script type="text/javascript" src="js/plugins/sui/sui.min.js"></script>
<script type="text/javascript" src="js/pages/index.js"></script>
<script type="text/javascript" src="js/widget/cartPanelView.js"></script>
<script type="text/javascript" src="js/widget/jquery.autocomplete.js"></script>
<script type="text/javascript" src="js/widget/nav.js"></script>
<script type="text/javascript" src="js/widget/nav.js"></script>
</body>
<script>
</script>
</html>